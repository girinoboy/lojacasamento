<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>
<script type="text/javascript" src="https://stc.sandbox.pagseguro.uol.com.br/pagseguro/api/v2/checkout/pagseguro.lightbox.js"/>
<style>
.ui-galleria-panel-wrapper {
    display:none;
}
</style>
</h:head>
<h:body>
<h:form id="form">
	        <p:growl id="messages" showDetail="true"/>
	    <p:toolbar id="tb">
		    <f:facet name="left">
			    <p:commandButton id="dynaButton" type="button" icon="fa fa-bars"/>
			    <p:menu overlay="true" trigger="dynaButton" my="left top" at="left bottom">
			        <p:submenu label="Ajax">
			            <p:menuitem value="Save"  update="messages" icon="ui-icon-disk"/>
			            <p:menuitem value="Update"  update="messages" icon="ui-icon-arrowrefresh-1-w"/>
			        </p:submenu>
			        <p:submenu label="Non-Ajax">
			            <p:menuitem value="Delete"  update="messages" ajax="false" icon="ui-icon-close"/>
			        </p:submenu>
			        <p:submenu label="Navigations">
			            <p:menuitem value="External" url="http://www.primefaces.org" icon="ui-icon-home"/>
			            <p:menuitem value="Internal"  icon="ui-icon-star"/>
			            <p:separator />
				        <p:menuitem value="Homepage" url="http://jbosswildfly-markine.rhcloud.com/" icon="ui-icon-extlink"/>
			        </p:submenu>
			    </p:menu>
		    </f:facet>
		     <f:facet name="header">
		    	 <p:commandButton type="button" title="Save3" icon="ui-icon-disk" value="SFSDF"/>
		     </f:facet>
		    <f:facet name="right">
		        <p:commandButton type="button" title="Save" icon="ui-icon-disk"/>
		        <p:commandButton type="button" title="Delete" icon="ui-icon-trash"/>
		        <p:commandButton type="button" title="Print" icon="ui-icon-print"/>
		    </f:facet>
		</p:toolbar>
 
		<p:sticky target="tb" />
		
		<p:contentFlow value="#{imagesView.images}" var="image">
		    <p:graphicImage name="demo/images/nature/#{image}" styleClass="content" />
		    <div class="caption">#{image}</div>
		</p:contentFlow>
		
		<p:repeat value="#{dataListView.cars1}" var="car">
	        <h:panelGrid columns="4" style="width:100%" columnClasses="logo,detail">
	            <p:commandLink update=":form:carDetail" oncomplete="PF('carDialog').show()">
	                <f:setPropertyActionListener value="#{car}" target="#{dataListView.selectedCar}" />
	                <p:graphicImage name="demo/images/car/#{car.brand}-big.gif" /> 
	            </p:commandLink>
	            
	            <p:outputPanel>
	                <h:panelGrid columns="2" cellpadding="5">
	                    <h:outputText value="Id:" />
	                    <h:outputText value="#{car.id}" style="font-weight: bold"/>
	 
	                    <h:outputText value="Year:" />
	                    <h:outputText value="#{car.year}" style="font-weight: bold"/>
	 
	                    <h:outputText value="Color:" />
	                    <h:outputText value="#{car.color}" style="font-weight: bold"/>
	                </h:panelGrid>
	            </p:outputPanel>
	            
	            <p:outputPanel>
	            	<h:panelGrid columns="1" cellpadding="2" style="width:100%">
			            <p:progressBar value="50" labelTemplate="Confirmados {value}%" displayOnly="true"/>
	            		<p:progressBar value="80" labelTemplate="Total {value}%" displayOnly="true"/>	
			            <p:commandButton value="Pagar" onclick="PF('dlg').show();" type="button" icon="ui-icon-extlink" />
		            </h:panelGrid>
				</p:outputPanel>
				<p:outputPanel>
				<h:panelGrid columns="1" cellpadding="2" style="width:100%">
				<p:galleria value="#{imagesView.images}" var="image" >
				    <p:graphicImage name="demo/images/nature/#{image}" alt="Image Description for #{image}" title="#{image}"/>
				</p:galleria>
				</h:panelGrid>
				</p:outputPanel>
	        </h:panelGrid>
	        <hr />
	    </p:repeat>
 
    <p:dialog header="Car Info" widgetVar="carDialog" modal="true" showEffect="blind" hideEffect="explode" resizable="false">
        <p:outputPanel id="carDetail" style="text-align:center;">
            <p:panelGrid  columns="2" rendered="#{not empty dataListView.selectedCar}" columnClasses="label,value">
                <f:facet name="header">
                    <p:graphicImage name="demo/images/car/#{dataListView.selectedCar.brand}-big.gif"/> 
                </f:facet>
 
                <h:outputText value="Id:" />
                <h:outputText value="#{dataListView.selectedCar.id}" />
 
                <h:outputText value="Year" />
                <h:outputText value="#{dataListView.selectedCar.year}" />
 
                <h:outputText value="Color:" />
                <h:outputText value="#{dataListView.selectedCar.color}" style="color:#{dataListView.selectedCar.color}"/>
 
                <h:outputText value="Price" />
                <h:outputText value="$#{dataListView.selectedCar.price}" />
            </p:panelGrid>
        </p:outputPanel>
    </p:dialog>
    
 
    <p:dialog header="Quantidade a pagar" widgetVar="dlg" focus="valor">
        <h:panelGrid columns="3" cellpadding="5">
            <p:outputLabel for="valor" value="R$" />
            <p:inputNumber id="valor" value="#{criaCheckout.valorDoacao}" decimalPlaces="2" required="true" emptyValue="empty" minValue="1" decimalSeparator="," thousandSeparator=".">
            	<p:ajax update="lightbox,site" listener="#{criaCheckout.geraCheckoutCode()}"/>
            </p:inputNumber>
            <p:commandButton id="site" value="Pagar site" actionListener="#{criaCheckout.redirecionar(criaCheckout.url)}"/>
            <p:commandButton id="lightbox" onclick="PagSeguroLightbox('#{criaCheckout.checkoutCode}')" value="Pagar com lightbox"/>
        </h:panelGrid>
    </p:dialog>
    
    <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
 
	<p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
	    <p:graphicImage name="/demo/images/ajaxloadingbar.gif" />
	</p:dialog>
	    
</h:form>
</h:body>
</html>