<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">

<h:head>
<script type="text/javascript" src="https://stc.sandbox.pagseguro.uol.com.br/pagseguro/api/v2/checkout/pagseguro.lightbox.js"/>
	<style>
		.ui-galleria-panel-wrapper {
		    display:none;
		}
		.logo {
            width: 5%
        }
        
        .detail {
            width: 95%;
            padding-left: 25px;
        }
        
        .detail td {
            font-size: 24px;
        }
        
        .item {
            border-bottom: 1px solid #A8A8A8;
            padding: 25px 10px;
        }
        .ui-panelgrid-footer {
		    text-align: center;
		    padding: 2px 5px;
		}
	</style>
</h:head>
<h:body>
<f:view locale="#{localeController.currentLocale}">
<h:form id="form">
	    <p:growl id="messages" showDetail="true"/>
	    <p:toolbar id="tb">
		    <f:facet name="left">
			    <p:commandButton id="dynaButton" type="button" icon="fa fa-bars"/>
			    <p:menu overlay="true" trigger="dynaButton" my="left top" at="left bottom">
			    	<p:menuitem value="Homepage" actionListener="#{criaCheckout.redirecionar('/')}" icon="ui-icon-home"/>
			        <p:submenu label="#{msgs.configuration}">
			            <p:menuitem value="#{msgs.edit}"  outcome="pretty:config" icon="ui-icon-gear">
			            	<f:param name="idLoja" value="#{criaCheckout.abstractDTO.nome}" />
			            </p:menuitem>
			            <p:separator />
			            <p:menuitem value="#{msgs.about}" onclick="PF('aboutDialog').show()" icon="ui-icon-extlink"/>
			        </p:submenu>
			    </p:menu>
		    </f:facet>
		     <f:facet name="header">
		    	 <p:commandButton type="button" title="Save3" icon="ui-icon-disk" value="SFSDF"/>
		     </f:facet>
		    <f:facet name="right">
		        <p:commandButton type="button" title="Save" icon="ui-icon-disk"/>
		        <p:commandButton type="button" title="Delete" icon="ui-icon-trash"/>
		        <p:commandButton type="button" title="Print" icon="ui-icon-print"/>
		    </f:facet>
		</p:toolbar>
 
		<p:sticky target="tb" />
		
<!-- 		<p:contentFlow value="#{imagesView.images}" var="image"> -->
<!-- 		    <p:graphicImage name="demo/images/nature/#{image}" styleClass="content" /> -->
<!-- 		    <div class="caption">#{image}</div> -->
<!-- 		</p:contentFlow> -->
		
		<p:repeat value="#{criaCheckout.abstractDTO.listProduto}" var="produto" >
	        <h:panelGrid columns="2" style="width:100%" columnClasses="logo,detail">
	            <p:commandLink update=":form:carDetail" oncomplete="PF('carDialog').show()">
	                <f:setPropertyActionListener value="#{produto}" target="#{criaCheckout.produtoDTO}" />
	                <p:graphicImage name="demo/images/brand/#{produto.imagem}" width="120" height="120"/>
	            </p:commandLink>
	            
	            <p:outputPanel>
	                <h:panelGrid columns="2" cellpadding="5" >
	                    <h:outputText value="Descrição:" />
	                    <h:outputText value="#{produto.descricao}" style="font-weight: bold"/>
	 
	                    <h:outputText value="Preço:" />
	                    <h:outputText value="$#{produto.preco}" style="font-weight: bold"/>
	 
<!-- 	                    <h:outputText value="Confirmado:" /> -->
<!-- 	                    <h:outputText value="#{car.price}" style="font-weight: bold"/> -->
	                </h:panelGrid>
	            <p:chart type="bar" model="#{chartView.creatBar(produto)}" style="height:60px"/>
	            </p:outputPanel>
	            
<!-- 	            <p:outputPanel> -->
<!-- 	            	<h:panelGrid columns="1" cellpadding="2" style="width:100%"> -->
<!-- 			            <p:progressBar value="50" labelTemplate="Confirmados {value}%" displayOnly="true"/> -->
<!-- 	            		<p:progressBar value="80" labelTemplate="Total {value}%" displayOnly="true"/>	 -->
<!-- 			            <p:commandButton value="Pagar" onclick="PF('dlg').show();" type="button" icon="ui-icon-extlink" /> -->
<!-- 		            </h:panelGrid> -->
<!-- 				</p:outputPanel> -->
<!-- 				<p:outputPanel> -->
<!-- 					<p:galleria value="#{imagesView.images}" var="image" panelWidth="500" panelHeight="313" showCaption="true"> -->
<!-- 					    <p:graphicImage name="demo/images/nature/#{image}" alt="Image Description for #{image}" title="#{image}"/> -->
<!-- 					</p:galleria> -->
<!-- 				</p:outputPanel> -->
	        </h:panelGrid>
	        <hr />
	    </p:repeat>
 
    <p:dialog header="Car Info" widgetVar="carDialog" modal="true" showEffect="blind" hideEffect="explode" resizable="false" focus="valor1">
        <p:outputPanel id="carDetail" style="text-align:center;">
            <p:panelGrid  columns="2" rendered="#{not empty criaCheckout.produtoDTO}" columnClasses="label,value">
                <f:facet name="header">
                	<p:graphicImage name="demo/images/brand/#{criaCheckout.produtoDTO.imagem}.png" width="120" height="120"/>
                </f:facet>
 
                <h:outputText value="Descricao:" />
                <h:outputText value="#{criaCheckout.produtoDTO.descricao}" />
 
                <h:outputText value="Preco" />
                <h:outputText value="$#{criaCheckout.produtoDTO.preco}" />
                
                <p:outputLabel for="valor1" value="R$" />
	            <p:inputNumber id="valor1" value="#{criaCheckout.valorDoacao}" decimalPlaces="2" required="true" emptyValue="empty" minValue="1" decimalSeparator="," thousandSeparator=".">
	            	<p:ajax update="site2" listener="#{criaCheckout.geraCheckoutCode()}"/>  
	            </p:inputNumber>
            
                <f:facet name="footer">
                	<p:commandButton id="site2" value="PagSeguro" action="#{criaCheckout.redirecionar()}" />
                </f:facet>
            </p:panelGrid>
        </p:outputPanel>
    </p:dialog>
    
 
    <p:dialog header="Quantidade a pagar" widgetVar="dlg" focus="valor">
        <h:panelGrid columns="3" cellpadding="5">
            <p:outputLabel for="valor" value="R$" />
            <p:inputNumber id="valor" value="#{criaCheckout.valorDoacao}" decimalPlaces="2" required="true" emptyValue="empty" minValue="1" decimalSeparator="," thousandSeparator=".">
            	<p:ajax update="lightbox,site" listener="#{criaCheckout.geraCheckoutCode()}"/>
            </p:inputNumber>
            <p:commandButton id="site" value="Pagar site" actionListener="#{criaCheckout.redirecionar(criaCheckout.url)}"/>
            <p:commandButton id="lightbox" onclick="PagSeguroLightbox('#{criaCheckout.checkoutCode}')" value="Pagar com lightbox"/>
        </h:panelGrid>
    </p:dialog>
    
    <p:dialog header="Modal Dialog" widgetVar="aboutDialog" modal="true" height="100">
    	<h:outputText value="See more in https://github.com/girinoboy/lojacasamento" />
	</p:dialog>   
    
    <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
 
	<p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
	    <p:graphicImage name="/demo/images/ajaxloadingbar.gif" />
	</p:dialog>
	    
</h:form>
</f:view>
</h:body>
</html>